# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## –û–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É

–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç –Ω–∞ Python –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –∑–∞–ø–∏—Å—É –º–æ–¥–µ–ª–µ–π –Ω–∞ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥—ñ—á–Ω—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏. –ë–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î python-telegram-bot v20.7 —Ç–∞ SQLite –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.

**–ú–æ–≤–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:** –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (–≤–µ—Å—å —Ç–µ–∫—Å—Ç –±–æ—Ç—É –º–∞—î –±—É—Ç–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é)

## –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
# –∞–±–æ
python3 bot.py
```

**–í–ê–ñ–õ–ò–í–û:** –ù—ñ–∫–æ–ª–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞–π –±–æ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ! –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–æ–±–∏—Ç—å —Ü–µ –≤—Ä—É—á–Ω—É.

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–§–∞–π–ª `.env` –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏:
- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤—ñ–¥ @BotFather
- `ADMIN_ID` - Telegram user ID –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `CHANNEL_ID` - ID –∫–∞–Ω–∞–ª—É –¥–ª—è –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó –∑–∞—Ö–æ–¥—ñ–≤ (–∑ –º—ñ–Ω—É—Å–æ–º!)
- `CHANNEL_LINK` - –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–∞–Ω–∞–ª (https://t.me/...)
- `GROUP_ID` - ID –≥—Ä—É–ø–∏ –¥–ª—è –∑–∞—è–≤–æ–∫ (–∑ –º—ñ–Ω—É—Å–æ–º!)
- `APPLICATIONS_CHANNEL_ID` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) - –æ–∫—Ä–µ–º–∏–π –∫–∞–Ω–∞–ª –¥–ª—è –∑–∞—è–≤–æ–∫

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

1. **bot.py** (~4400 —Ä—è–¥–∫—ñ–≤) - –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –∑ –ª–æ–≥—ñ–∫–æ—é –±–æ—Ç–∞
   - ConversationHandler –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞—Ö–æ–¥—ñ–≤ (–º–Ω–æ–∂–∏–Ω–Ω–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è)
   - ConversationHandler –¥–ª—è –ø–æ–¥–∞—á—ñ –∑–∞—è–≤–æ–∫ (–º–æ–¥–µ–ª—å)
   - ConversationHandler –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - ConversationHandler –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–∏–ø–∞–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä
   - Callback handlers –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞—è–≤–∫–∞–º–∏ –≤ –≥—Ä—É–ø—ñ
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

2. **database.py** - –†–æ–±–æ—Ç–∞ –∑ SQLite
   - 5 —Ç–∞–±–ª–∏—Ü—å: users, events, applications, application_photos, procedure_types
   - –ú–µ—Ç–æ–¥–∏ CRUD –¥–ª—è –≤—Å—ñ—Ö —Å—É—Ç–Ω–æ—Å—Ç–µ–π
   - –ë–∞–∑–∞ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É

3. **constants.py** - –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ —Ç–∞ —É—Ç–∏–ª—ñ—Ç–∏
   - PROCEDURE_TYPES - —Ç–∏–ø–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä (–∑–∞—Ä–∞–∑ 7 —Ç–∏–ø—ñ–≤)
   - –°—Ç–∞–Ω–∏ –¥–ª—è –≤—Å—ñ—Ö ConversationHandler
   - generate_date_options() - –≥–µ–Ω–µ—Ä—É—î –¥–∞—Ç–∏ –Ω–∞ 7 –¥–Ω—ñ–≤ –≤–ø–µ—Ä–µ–¥
   - generate_time_slots() - –≥–µ–Ω–µ—Ä—É—î —á–∞—Å–æ–≤—ñ —Å–ª–æ—Ç–∏ 9:00-17:00 –∑ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 10 —Ö–≤

### –û—Å–Ω–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö:

```
–ê–¥–º—ñ–Ω —Å—Ç–≤–æ—Ä—é—î –∑–∞—Ö–æ–¥–∏ (–º–Ω–æ–∂–∏–Ω–Ω–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è) ‚Üí –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –≤ –∫–∞–Ω–∞–ª (–¥–µ–Ω–Ω–µ —Ä–æ–∑–∫–ª–∞–¥—É) ‚Üí
‚Üí –ú–æ–¥–µ–ª—å –æ–±–∏—Ä–∞—î –∑–∞—Ö—ñ–¥(–∏) ‚Üí –ü–æ–¥–∞—î –∑–∞—è–≤–∫—É –∑ —Ñ–æ—Ç–æ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ) ‚Üí
‚Üí –ó–∞—è–≤–∫–∞ –≤ –≥—Ä—É–ø—É –∑ —Ö–µ—à—Ç–µ–≥–∞–º–∏ ‚Üí –ê–¥–º—ñ–Ω –ø—Ä–∏–π–º–∞—î/–≤—ñ–¥—Ö–∏–ª—è—î ‚Üí
‚Üí –í–∏–±—ñ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
```

### ConversationHandler —Å—Ç–∞–Ω–∏:

**–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞—Ö–æ–¥—ñ–≤ (7 —Å—Ç–∞–Ω—ñ–≤ - –º–Ω–æ–∂–∏–Ω–Ω–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è):**
- CREATE_EVENT_DATE ‚Üí CREATE_EVENT_TIME ‚Üí CREATE_EVENT_PROCEDURE ‚Üí
  ‚Üí CREATE_EVENT_PHOTO_NEEDED ‚Üí CREATE_EVENT_COMMENT ‚Üí
  ‚Üí CREATE_EVENT_REVIEW (–æ–≥–ª—è–¥ —Ä–æ–∑–∫–ª–∞–¥—É) ‚Üí CREATE_EVENT_CONFIRM

**–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏ (5 —Å—Ç–∞–Ω—ñ–≤):**
- APPLY_SELECT_EVENTS (–≤–∏–±—ñ—Ä –∑–∞—Ö–æ–¥—ñ–≤) ‚Üí APPLY_FULL_NAME ‚Üí APPLY_PHONE ‚Üí
  ‚Üí APPLY_PHOTOS ‚Üí APPLY_CONFIRM

**–î–æ–¥–∞—Ç–∫–æ–≤—ñ ConversationHandler:**
- BLOCK_USER_ID - –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- ADD_PROCEDURE_TYPE_NAME - –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–∏–ø—ñ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä
- EDIT_PROCEDURE_TYPE_NAME - —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∏–ø—ñ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä
- CLEAR_DB_PASSWORD - –æ—á–∏—Å—Ç–∫–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

## –í–∞–∂–ª–∏–≤—ñ –¥–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ú–Ω–æ–∂–∏–Ω–Ω–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è –∑–∞—Ö–æ–¥—ñ–≤

- –ê–¥–º—ñ–Ω –º–æ–∂–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ –∑–∞—Ö–æ–¥—ñ–≤ –Ω–∞ –æ–¥–∏–Ω –¥–µ–Ω—å –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑
- –ü—Ä–æ—Ü–µ—Å: –æ–±–∏—Ä–∞—î—Ç—å—Å—è –¥–∞—Ç–∞ ‚Üí –¥–æ–¥–∞—é—Ç—å—Å—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ –∑ —á–∞—Å–æ–º ‚Üí –ø—É–±–ª—ñ–∫—É—î—Ç—å—Å—è –¥–µ–Ω–Ω–µ —Ä–æ–∑–∫–ª–∞–¥—É
- –ö–Ω–æ–ø–∫–∏: "‚ûï –î–æ–¥–∞—Ç–∏ —â–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—É", "üóë –í–∏–¥–∞–ª–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é", "üìã –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥"
- –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è: –≤—Å—ñ –∑–∞—Ö–æ–¥–∏ –æ–¥–Ω–æ–≥–æ –¥–Ω—è –ø—É–±–ª—ñ–∫—É—é—Ç—å—Å—è –≤ –∫–∞–Ω–∞–ª—ñ –æ–¥–Ω–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
- –û–≥–ª—è–¥ —Ä–æ–∑–∫–ª–∞–¥—É –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ –∑–∞—Ö–æ–¥–∏ –Ω–∞ –æ–±—Ä–∞–Ω—É –¥–∞—Ç—É

### –ú–Ω–æ–∂–∏–Ω–Ω–∏–π –≤–∏–±—ñ—Ä –∑–∞—Ö–æ–¥—ñ–≤ –º–æ–¥–µ–ª–ª—é

- –ú–æ–¥–µ–ª—å –º–æ–∂–µ –ø–æ–¥–∞—Ç–∏ –æ–¥–Ω—É –∑–∞—è–≤–∫—É –Ω–∞ –∫—ñ–ª—å–∫–∞ –∑–∞—Ö–æ–¥—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- –ü—ñ—Å–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É –∑ –∫–∞–Ω–∞–ª—É –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∑–∞—Ö–æ–¥—ñ–≤ –∑ —á–µ–∫–±–æ–∫—Å–∞–º–∏
- –ö–Ω–æ–ø–∫–∞ "‚úÖ –í–∏–±—Ä–∞—Ç–∏ –≤—Å—ñ" - –≤–∏–±–∏—Ä–∞—î –≤—Å—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –∑–∞—Ö–æ–¥–∏
- –ú–æ–¥–µ–ª—å –∑–∞–ø–æ–≤–Ω—é—î –¥–∞–Ω—ñ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å—ñ—Ö –æ–±—Ä–∞–Ω–∏—Ö –∑–∞—Ö–æ–¥—ñ–≤
- –í –±–∞–∑—ñ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –æ–∫—Ä–µ–º–∞ –∑–∞—è–≤–∫–∞ (application) –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –æ–±—Ä–∞–Ω–æ–≥–æ –∑–∞—Ö–æ–¥—É

### –§–æ—Ç–æ –≤—ñ–¥ –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤

- **–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –ù–ï –¥–æ–¥–∞—î —Ñ–æ—Ç–æ** –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞—Ö–æ–¥—É
- –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –ª–∏—à–µ –≤–∏–±–∏—Ä–∞—î: "–ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ñ–æ—Ç–æ –≤—ñ–¥ –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤?"
- –Ø–∫—â–æ `needs_photo=True`, –∫–∞–Ω–¥–∏–¥–∞—Ç **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ** –ø–æ–≤–∏–Ω–µ–Ω –¥–æ–¥–∞—Ç–∏ –º—ñ–Ω—ñ–º—É–º 1 —Ñ–æ—Ç–æ (–º–∞–∫—Å–∏–º—É–º 3)
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ `apply_photos_done()`: —è–∫—â–æ —Ñ–æ—Ç–æ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ, –∞–ª–µ –Ω–µ –¥–æ–¥–∞–Ω–æ ‚Üí –ø–æ–º–∏–ª–∫–∞
- –ö–Ω–æ–ø–∫–∞ "‚úÖ –ì–æ—Ç–æ–≤–æ" –∑–∞–≤–µ—Ä—à—É—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–æ—Ç–æ
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `MAX_APPLICATION_PHOTOS = 3` –≤ bot.py

### –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

- TTL –¥–ª—è –∞–¥–º—ñ–Ω—Å—å–∫–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: `ADMIN_MESSAGE_TTL = 15` —Å–µ–∫—É–Ω–¥
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `context.user_data['admin_messages']` –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è
- –§—É–Ω–∫—Ü—ñ—ó: `register_admin_dialog()`, `clear_admin_dialog()`, `delete_admin_message()`
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –º—ñ–∂ –µ–∫—Ä–∞–Ω–∞–º–∏ —Å—Ç–∞—Ä—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- –û—á–∏—Å—Ç–∫–∞ –ù–ï –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ GROUP_ID (–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—ñ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è)

### –î–µ–Ω–Ω–µ –∑–≤–µ–¥–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—ñ

- –§—É–Ω–∫—Ü—ñ—è `build_day_summary_text()` —Å—Ç–≤–æ—Ä—é—î –∑–≤–µ–¥–µ–Ω–Ω—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –¥–∞—Ç–∏
- –ü–æ–∫–∞–∑—É—î –≤—Å—ñ –∑–∞—Ö–æ–¥–∏ –¥–Ω—è –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∑–∞—è–≤–æ–∫ –∑–∞ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞—Ç—É—Å—É –∑–∞—è–≤–æ–∫ —á–µ—Ä–µ–∑ `update_day_summary()`
- –§–æ—Ä–º–∞—Ç: "üìÖ –î–µ–Ω—å {–¥–∞—Ç–∞}\n\nüïê {—á–∞—Å} - {–ø—Ä–æ—Ü–µ–¥—É—Ä–∞}\n  —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞—è–≤–æ–∫"
- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–æ–∂–µ–Ω –∑–∞—Ö—ñ–¥ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É

### –°—Ç–∞—Ç—É—Å–∏ –∑–∞—è–≤–æ–∫ —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–æ—Å—É–≤–∞–Ω–Ω—è

- **pending** (‚è≥ –û—á—ñ–∫—É—î) - –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞—Ç—É—Å
- **approved** (‚úÖ –†–µ–∑–µ—Ä–≤) - —Å—Ö–≤–∞–ª–µ–Ω–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- **primary** (üåü –û—Å–Ω–æ–≤–Ω–∏–π) - –æ–±—Ä–∞–Ω–∏–π –æ—Å–Ω–æ–≤–Ω–∏–π –∫–∞–Ω–¥–∏–¥–∞—Ç (—Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –Ω–∞ –∑–∞—Ö—ñ–¥)
- **rejected** (‚ùå –í—ñ–¥—Ö–∏–ª–µ–Ω–æ) - –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- **cancelled** (üö´ –°–∫–∞—Å–æ–≤–∞–Ω–æ) - —Å–∫–∞—Å–æ–≤–∞–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–æ—Å—É–≤–∞–Ω–Ω—è:
- –Ø–∫—â–æ primary –≤—ñ–¥–º—ñ–Ω—è—î –∑–∞—è–≤–∫—É ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±–∏—Ä–∞—î—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω–∏–π approved
- –§—É–Ω–∫—Ü—ñ—è `promote_next_candidate()` –≤–∏–±–∏—Ä–∞—î –Ω–∞–π—Å—Ç–∞—Ä—ñ—à—É approved –∑–∞—è–≤–∫—É
- –ù–æ–≤–æ–º—É primary –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó

### –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞—è–≤–æ–∫ –≤ –≥—Ä—É–ø—ñ

- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–¥–∞–≤ –∑–∞—è–≤–∫–∏ –Ω–∞ –∫—ñ–ª—å–∫–∞ –∑–∞—Ö–æ–¥—ñ–≤ ‚Üí –æ–¥–Ω–µ –≥—Ä—É–ø–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –§—É–Ω–∫—Ü—ñ—è `build_group_application_text()` —Ñ–æ—Ä–º—É—î —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∑–∞—è–≤–æ–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–∂–Ω–æ—é –∑–∞—è–≤–∫–æ—é –æ–∫—Ä–µ–º–æ: —Å—Ö–≤–∞–ª–∏—Ç–∏/–≤—ñ–¥—Ö–∏–ª–∏—Ç–∏/–æ–±—Ä–∞—Ç–∏ –æ—Å–Ω–æ–≤–Ω–∏–º
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞—Ç—É—Å—É –±—É–¥—å-—è–∫–æ—ó –∑–∞—è–≤–∫–∏ —á–µ—Ä–µ–∑ `refresh_group_application_message()`

### –•–µ—à—Ç–µ–≥–∏ –≤ –≥—Ä—É–ø—ñ

–ó–∞—è–≤–∫–∏ –ø—É–±–ª—ñ–∫—É—é—Ç—å—Å—è –∑ –¥–≤–æ–º–∞ —Ö–µ—à—Ç–µ–≥–∞–º–∏ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó:

- `#–∑–∞—Ö—ñ–¥_{event_id}` - –≤—Å—ñ –∑–∞—è–≤–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∑–∞—Ö—ñ–¥
- `#–∫–∞–Ω–¥–∏–¥–∞—Ç_{user_id}` - –≤—Å—ñ –∑–∞—è–≤–∫–∏ –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### Deep linking

–ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –∑–∞—Ö–æ–¥—ñ–≤ –≤ –∫–∞–Ω–∞–ª—ñ –º—ñ—Å—Ç–∏—Ç—å –∫–Ω–æ–ø–∫—É "üìù –ü–æ–¥–∞—Ç–∏ –∑–∞—è–≤–∫—É":

```
https://t.me/{bot_username}?start=apply
```

–û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –≤ `start()` —á–µ—Ä–µ–∑ `context.args`. –ê—Ä–≥—É–º–µ–Ω—Ç `apply` –∑–∞–ø—É—Å–∫–∞—î –¥—ñ–∞–ª–æ–≥ –ø–æ–¥–∞—á—ñ –∑–∞—è–≤–∫–∏.

### Callback data patterns

**–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞—Ö–æ–¥—ñ–≤:**
- `date_{date}` - –≤–∏–±—ñ—Ä –¥–∞—Ç–∏
- `time_{time}` - –≤–∏–±—ñ—Ä —á–∞—Å—É
- `proc_{index}` - –≤–∏–±—ñ—Ä –ø—Ä–æ—Ü–µ–¥—É—Ä–∏
- `photo_yes/photo_no` - —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ñ–æ—Ç–æ
- `skip_comment` - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä
- `add_event` - –¥–æ–¥–∞—Ç–∏ —â–µ –æ–¥–Ω—É –ø—Ä–æ—Ü–µ–¥—É—Ä—É
- `remove_last` - –≤–∏–¥–∞–ª–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É
- `add_more` - –¥–æ–¥–∞—Ç–∏ —â–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—É –ø—ñ—Å–ª—è –æ–≥–ª—è–¥—É
- `review_schedule` - –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥
- `publish_schedule` - –æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥
- `same_date` - —Å—Ç–≤–æ—Ä–∏—Ç–∏ —â–µ –∑–∞—Ö—ñ–¥ –Ω–∞ —Ç—É –∂ –¥–∞—Ç—É

**–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞—è–≤–∫–∞–º–∏:**
- `approve_{application_id}` - –ø—Ä–∏–π–Ω—è—Ç–∏ –∑–∞—è–≤–∫—É
- `reject_{application_id}` - –≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ –∑–∞—è–≤–∫—É
- `primary_{application_id}` - –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –æ—Å–Ω–æ–≤–Ω–∏–º
- `view_apps_{event_id}` - –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –∑–∞—Ö—ñ–¥
- `cancel_app_{application_id}` - —Å–∫–∞—Å—É–≤–∞—Ç–∏ –∑–∞—è–≤–∫—É (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á)
- `confirm_cancel_primary_{app_id}` - –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è primary
- `cancel_primary_back_{app_id}` - –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –Ω–∞–∑–∞–¥

**–í–∏–±—ñ—Ä –∑–∞—Ö–æ–¥—ñ–≤ –¥–ª—è –∑–∞—è–≤–∫–∏:**
- `toggle_event_{event_id}` - –≤–∏–±—Ä–∞—Ç–∏/—Å–∫–∞—Å—É–≤–∞—Ç–∏ –∑–∞—Ö—ñ–¥
- `select_all_events` - –≤–∏–±—Ä–∞—Ç–∏ –≤—Å—ñ –∑–∞—Ö–æ–¥–∏
- `reset_events` - —Å–∫–∏–Ω—É—Ç–∏ –≤–∏–±—ñ—Ä
- `continue_events` - –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –∑ –≤–∏–±—Ä–∞–Ω–∏–º–∏ –∑–∞—Ö–æ–¥–∞–º–∏

**–ê–¥–º—ñ–Ω–∫–∞:**
- `cancel_event_confirm_{event_id}` - –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –∑–∞—Ö–æ–¥—É
- `admin_menu`, `user_menu` - –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é
- `close_msg` - –∑–∞–∫—Ä–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `close_admin_dialog` - –∑–∞–∫—Ä–∏—Ç–∏ –¥—ñ–∞–ª–æ–≥ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- –î–∞–Ω—ñ (–ü–Ü–ë, —Ç–µ–ª–µ—Ñ–æ–Ω) –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü—ñ `users` –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ—ó –∑–∞—è–≤–∫–∏
- –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∑–∞—è–≤–∫–∞—Ö –ø—Ä–æ–ø–æ–Ω—É—î—Ç—å—Å—è –≤–∏–±—ñ—Ä: "–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ" –∞–±–æ "–í–≤–µ—Å—Ç–∏ –Ω–æ–≤—ñ"
- –§—É–Ω–∫—Ü—ñ—è `validate_ukrainian_phone()` –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ñ–æ—Ä–º–∞—Ç —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ –Ω–æ–º–µ—Ä–∞
- –ù–æ–º–µ—Ä –º–∞—î –ø–æ—á–∏–Ω–∞—Ç–∏—Å—è –∑ +380 —ñ –º—ñ—Å—Ç–∏—Ç–∏ 12 —Ü–∏—Ñ—Ä

## –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### F-string –∑ –∞–ø–æ—Å—Ç—Ä–æ—Ñ–∞–º–∏

‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:

```python
f"‚úÖ –§–æ—Ç–æ {'–æ–±–æ–≤\'—è–∑–∫–æ–≤–µ' if x else '–Ω—ñ'}"
```

‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

```python
text = "–æ–±–æ–≤'—è–∑–∫–æ–≤–µ" if x else "–Ω—ñ"
f"‚úÖ –§–æ—Ç–æ {text}"
```

### ID –∫–∞–Ω–∞–ª—É/–≥—Ä—É–ø–∏

–ó–∞–≤–∂–¥–∏ –∑ –º—ñ–Ω—É—Å–æ–º: `-1001234567890`

### –ü—Ä–∞–≤–∞ –±–æ—Ç–∞

- –í –∫–∞–Ω–∞–ª—ñ: –ø—Ä–∞–≤–æ "–ü—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"
- –í –≥—Ä—É–ø—ñ: –±–∞–∑–æ–≤—ñ –ø—Ä–∞–≤–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

SQLite –∑ 5 —Ç–∞–±–ª–∏—Ü—è–º–∏:

### users
- `user_id` INTEGER PRIMARY KEY
- `full_name` TEXT
- `phone` TEXT
- `is_blocked` INTEGER DEFAULT 0
- `created_at` TIMESTAMP

### events
- `id` INTEGER PRIMARY KEY AUTOINCREMENT
- `date` TEXT NOT NULL (—Ñ–æ—Ä–º–∞—Ç: YYYY-MM-DD)
- `time` TEXT NOT NULL (—Ñ–æ—Ä–º–∞—Ç: HH:MM)
- `procedure_type` TEXT NOT NULL
- `needs_photo` INTEGER DEFAULT 0
- `comment` TEXT (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- `status` TEXT DEFAULT 'draft' (draft/published)
- `message_id` INTEGER (ID –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –∫–∞–Ω–∞–ª—ñ)
- `created_at` TIMESTAMP

### applications
- `id` INTEGER PRIMARY KEY AUTOINCREMENT
- `event_id` INTEGER NOT NULL (FK ‚Üí events.id)
- `user_id` INTEGER NOT NULL (FK ‚Üí users.user_id)
- `full_name` TEXT NOT NULL
- `phone` TEXT NOT NULL
- `consent` INTEGER DEFAULT 0
- `status` TEXT DEFAULT 'pending' (pending/approved/primary/rejected/cancelled)
- `is_primary` INTEGER DEFAULT 0
- `group_message_id` INTEGER (ID –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—ñ)
- `created_at` TIMESTAMP

### application_photos
- `id` INTEGER PRIMARY KEY AUTOINCREMENT
- `application_id` INTEGER NOT NULL (FK ‚Üí applications.id)
- `file_id` TEXT NOT NULL (Telegram file_id)

### procedure_types
- `id` INTEGER PRIMARY KEY AUTOINCREMENT
- `name` TEXT NOT NULL UNIQUE
- `is_active` INTEGER DEFAULT 1
- `created_at` TIMESTAMP

**–í–∞–∂–ª–∏–≤–æ:**
- –¢–∞–±–ª–∏—Ü—ñ `event_photos` –Ω–µ–º–∞—î! –§–æ—Ç–æ –¥–æ–¥–∞—é—Ç—å –ª–∏—à–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∏ —á–µ—Ä–µ–∑ `application_photos`.
- –¢–∏–ø–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ë–î, –∞ –Ω–µ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞—Ö (–∑ –≤–µ—Ä—Å—ñ—ó –∑ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–º –∫–µ—Ä—É–≤–∞–Ω–Ω—è–º)

## –ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–∏–ø–∞–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä

### –î–∏–Ω–∞–º—ñ—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è (—á–µ—Ä–µ–∑ –±–æ—Ç–∞)

–í –∞–¥–º—ñ–Ω-–º–µ–Ω—é —î —Ä–æ–∑–¥—ñ–ª "‚öôÔ∏è –¢–∏–ø–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä":
- –ü–µ—Ä–µ–≥–ª—è–¥ –≤—Å—ñ—Ö —Ç–∏–ø—ñ–≤ –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞—Ö–æ–¥—ñ–≤
- –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ç–∏–ø—ñ–≤
- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞–∑–≤–∏ —ñ—Å–Ω—É—é—á–∏—Ö
- –ê–∫—Ç–∏–≤–∞—Ü—ñ—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü—ñ—è —Ç–∏–ø—ñ–≤
- –í–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ (—è–∫—â–æ –Ω–µ–º–∞—î –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑–∞—Ö–æ–¥—ñ–≤)

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ PROCEDURE_TYPES (constants.py)

–ó–∞–ª–∏—à–∞—î—Ç—å—Å—è –¥–ª—è –∑–≤–æ—Ä–æ—Ç–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ —Ç–∞ –ø–æ—á–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó. –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É —Ç–∏–ø–∏ –∑ —Ü—å–æ–≥–æ —Å–ø–∏—Å–∫—É –¥–æ–¥–∞—é—Ç—å—Å—è –≤ –ë–î.

## –ö–ª—é—á–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞—Ö–æ–¥—ñ–≤
- `create_event_start()` - –ø–æ—á–∞—Ç–æ–∫ –¥—ñ–∞–ª–æ–≥—É
- `build_schedule_overview()` - —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –æ–≥–ª—è–¥—É —Ä–æ–∑–∫–ª–∞–¥—É
- `publish_day_schedule_to_channel()` - –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è –¥–µ–Ω–Ω–æ–≥–æ —Ä–æ–∑–∫–ª–∞–¥—É –≤ –∫–∞–Ω–∞–ª

### –ü–æ–¥–∞—á–∞ –∑–∞—è–≤–æ–∫
- `show_multi_event_selection()` - –≤–∏–±—ñ—Ä –∑–∞—Ö–æ–¥—ñ–≤ –¥–ª—è –∑–∞—è–≤–∫–∏
- `apply_photos_done()` - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–æ—Ç–æ
- `submit_application()` - —Ñ—ñ–Ω–∞–ª—å–Ω–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- `publish_group_application_to_channel()` - –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è –≤ –≥—Ä—É–ø—É

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞—è–≤–∫–∞–º–∏
- `approve_application()` - —Å—Ö–≤–∞–ª–µ–Ω–Ω—è –∑–∞—è–≤–∫–∏
- `set_primary_application()` - –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è primary
- `promote_candidate_to_primary()` - –ø—Ä–æ—Å—É–≤–∞–Ω–Ω—è –¥–æ primary –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏
- `promote_next_candidate()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–æ—Å—É–≤–∞–Ω–Ω—è –ø—Ä–∏ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—ñ
- `refresh_group_application_message()` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—ñ

### –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —É—Ç–∏–ª—ñ—Ç–∏
- `format_date()` - —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–∞—Ç–∏ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- `get_weekday_accusative()` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–Ω—è —Ç–∏–∂–Ω—è –≤ –∑–Ω–∞—Ö—ñ–¥–Ω–æ–º—É –≤—ñ–¥–º—ñ–Ω–∫—É
- `build_message_link()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `trim_text()` - –æ–±—Ä—ñ–∑–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –¥–æ –ø–µ–≤–Ω–æ—ó –¥–æ–≤–∂–∏–Ω–∏

## –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### Error handler
–§—É–Ω–∫—Ü—ñ—è `error_handler()` –ª–æ–≥—É—î –≤—Å—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –ø—Ä–æ –ø–æ–º–∏–ª–∫—É.

### –¢–∏–ø–æ–≤—ñ Telegram –ø–æ–º–∏–ª–∫–∏
- `Forbidden` - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–±–ª–æ–∫—É–≤–∞–≤ –±–æ—Ç–∞ ‚Üí –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `is_blocked=1`
- `BadRequest` - –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π –∑–∞–ø–∏—Ç ‚Üí –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
- `ChatMigrated` - –≥—Ä—É–ø–∞ –º—ñ–≥—Ä—É–≤–∞–ª–∞ ‚Üí –æ–Ω–æ–≤–ª–µ–Ω–Ω—è chat_id
- `TimedOut`, `NetworkError` - –º–µ—Ä–µ–∂–µ–≤—ñ –ø–æ–º–∏–ª–∫–∏ ‚Üí retry —á–µ—Ä–µ–∑ bot API

## –õ–æ–≥—É–≤–∞–Ω–Ω—è

- –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –ª–æ–≥—ñ–≤: `BOT_LOG_FILE` –∑ .env (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `bot-actions.log`)
- –†—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è: DEBUG –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
- –õ–æ–≥—É—î—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å + —Ñ–∞–π–ª (—è–∫—â–æ –≤–∫–∞–∑–∞–Ω–æ)
- –§–æ—Ä–º–∞—Ç: `%(asctime)s - %(levelname)s - %(name)s - %(message)s`

## –í–∞–∂–ª–∏–≤—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –ø—Ä–∞–≤–∏–ª–∞

### –ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- **–ó–∞–ø—É—Å–∫/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–æ–±–∏—Ç—å —Ü–µ –≤—Ä—É—á–Ω—É
- **–î–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–æ—Ç–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º** - —Ñ–æ—Ç–æ –¥–æ–¥–∞—é—Ç—å –ª–∏—à–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∏
- **–ë—ñ–ª—å—à–µ 3 —Ñ–æ—Ç–æ –Ω–∞ –∑–∞—è–≤–∫—É** - –æ–±–º–µ–∂–µ–Ω–Ω—è `MAX_APPLICATION_PHOTOS = 3`
- **–ë—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ primary –Ω–∞ –∑–∞—Ö—ñ–¥** - –ª–∏—à–µ –æ–¥–∏–Ω –æ—Å–Ω–æ–≤–Ω–∏–π –∫–∞–Ω–¥–∏–¥–∞—Ç

### –û–±–æ–≤'—è–∑–∫–æ–≤–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –º–∞—î –±—É—Ç–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º (+380...)
- –î–∞—Ç–∞ –∑–∞—Ö–æ–¥—É –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –≤ –º–∏–Ω—É–ª–æ–º—É (–¥–ª—è today - —á–∞—Å —Ç–∞–∫–æ–∂ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è)
- –§–æ—Ç–æ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ —è–∫—â–æ `needs_photo=True` –¥–ª—è –∑–∞—Ö–æ–¥—É
- ID –∫–∞–Ω–∞–ª—É/–≥—Ä—É–ø–∏ –º–∞—é—Ç—å –ø–æ—á–∏–Ω–∞—Ç–∏—Å—è –∑ –º—ñ–Ω—É—Å–∞

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (context.user_data)
- `admin_messages` - —Å–ø–∏—Å–æ–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏
- `selected_event_ids` - –≤–∏–±—Ä–∞–Ω—ñ –∑–∞—Ö–æ–¥–∏ –ø—Ä–∏ –ø–æ–¥–∞–Ω–Ω—ñ –∑–∞—è–≤–∫–∏
- `application_photos` - —Ç–∏–º—á–∞—Å–æ–≤–æ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ file_id —Ñ–æ—Ç–æ
- `schedule` - —Ç–∏–º—á–∞—Å–æ–≤–∏–π —Ä–æ–∑–∫–ª–∞–¥ –ø—Ä–∏ –º–Ω–æ–∂–∏–Ω–Ω–æ–º—É –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—ñ

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ Telegram API

### Inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
- –ú–∞–∫—Å–∏–º—É–º 8 –∫–Ω–æ–ø–æ–∫ –≤ —Ä—è–¥—É –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- Callback data –æ–±–º–µ–∂–µ–Ω–∞ 64 –±–∞–π—Ç–∞–º–∏
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `chunk_list()` –¥–ª—è —Ä–æ–∑–±–∏—Ç—Ç—è –Ω–∞ —Ä—è–¥–∏

### –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `parse_mode=ParseMode.HTML` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
- `disable_web_page_preview=True` –¥–ª—è –ø–æ—Å–∏–ª–∞–Ω—å
- –ï–∫—Ä–∞–Ω—É–≤–∞–Ω–Ω—è HTML —á–µ—Ä–µ–∑ `html.escape()`

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
- –ü—Ä–∏ `Forbidden` - –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —è–∫ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ–≥–æ
- –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –≤ –≥—Ä—É–ø—ñ - –ª–æ–≥—É–≤–∞–Ω–Ω—è –±–µ–∑ –∫—Ä–∞—Ö—É –±–æ—Ç–∞
- Retry –ª–æ–≥—ñ–∫–∞ –¥–ª—è –º–µ—Ä–µ–∂–µ–≤–∏—Ö –ø–æ–º–∏–ª–æ–∫

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–∏—Ö –∑–º—ñ–Ω
1. –ü–µ—Ä–µ–≤—ñ—Ä —â–æ –≤—Å—ñ ConversationHandler –º–∞—é—Ç—å fallbacks
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è —â–æ callback_data —É–Ω—ñ–∫–∞–ª—å–Ω—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä —â–æ –≤—Å—ñ —Ç–µ–∫—Å—Ç–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é
4. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è —â–æ —Ñ–æ—Ç–æ –ù–ï –¥–æ–¥–∞—é—Ç—å—Å—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

### –ü—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ë–î
1. –°—Ç–≤–æ—Ä–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é (–¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–ª–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ ALTER TABLE)
2. –ü–µ—Ä–µ–≤—ñ—Ä —â–æ —ñ—Å–Ω—É—é—á—ñ –¥–∞–Ω—ñ –Ω–µ –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ
3. –¢–µ—Å—Ç—É–π –Ω–∞ –∫–æ–ø—ñ—ó –ë–î, –∞ –Ω–µ –Ω–∞ production

### –ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–æ–≤–∏—Ö callback handlers
1. –î–æ–¥–∞–π pattern –≤ main()
2. –ü–µ—Ä–µ–≤—ñ—Ä —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `answer_callback_query()`
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è —â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–±–æ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è

## –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –∫–∞–Ω–∞–ª–æ–º —Ç–∞ –≥—Ä—É–ø–æ—é

### –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –≤ –∫–∞–Ω–∞–ª
- –î–µ–Ω–Ω–µ —Ä–æ–∑–∫–ª–∞–¥—É –ø—É–±–ª—ñ–∫—É—î—Ç—å—Å—è –æ–¥–Ω–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
- –ú—ñ—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∑–∞—Ö–æ–¥—ñ–≤ –¥–Ω—è –∑ —á–∞—Å–æ–º —Ç–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–æ—é
- –ö–Ω–æ–ø–∫–∞ "üìù –ü–æ–¥–∞—Ç–∏ –∑–∞—è–≤–∫—É" –≤–µ–¥–µ –≤ –±–æ—Ç–∞ –∑ deep link
- `message_id` –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –¥–ª—è –º–æ–∂–ª–∏–≤–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –≤ –≥—Ä—É–ø—É
- –ì—Ä—É–ø–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤ –∑ –∫—ñ–ª—å–∫–æ–º–∞ –∑–∞—è–≤–∫–∞–º–∏
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞—Ç—É—Å—É –±—É–¥—å-—è–∫–æ—ó –∑–∞—è–≤–∫–∏
- –•–µ—à—Ç–µ–≥–∏ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó (#–∑–∞—Ö—ñ–¥_X, #–∫–∞–Ω–¥–∏–¥–∞—Ç_Y)
- –î–µ–Ω–Ω–µ –∑–≤–µ–¥–µ–Ω–Ω—è –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤ –≥—Ä—É–ø—ñ
- –ö–Ω–æ–ø–∫–∏ approve/reject/primary –¥–ª—è –∫–æ–∂–Ω–æ—ó –∑–∞—è–≤–∫–∏
- –ü–µ—Ä–µ–≥–ª—è–¥ —Ñ–æ—Ç–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (—è–∫—â–æ –¥–æ–¥–∞–Ω—ñ)
- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞—è–≤–æ–∫ –∑–∞ —Å—Ç–∞—Ç—É—Å–∞–º–∏
